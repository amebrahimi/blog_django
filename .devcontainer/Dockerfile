FROM python:3

WORKDIR /code

COPY requirements.txt .
RUN pip install --disable-pip-version-check --no-cache-dir -r requirements.txt

ARG DJANGO_SECRET_KEY
ARG DJANGO_DEBUG
ARG DJANGO_ALLOWED_HOSTS

ENV DJANGO_SECRET_KEY=${DJANGO_SECRET_KEY}
ENV DJANGO_DEBUG=${DJANGO_DEBUG}
ENV DJANGO_ALLOWED_HOSTS=${DJANGO_ALLOWED_HOSTS}

ENV DJANGO_DB_NAME=postgres
ENV DJANGO_DB_USER=postgres
ENV DJANGO_DB_PASSWORD=postgres
ENV DJANGO_DB_HOST=db
ENV DJANGO_REDIS_URL=redis://redis:6379

EXPOSE 8000

COPY . .


